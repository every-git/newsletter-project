---
import BaseLayout from '../layouts/BaseLayout.astro';
import ArticleCard from '../components/ArticleCard.astro';
import { getBookmarkedArticles } from '../lib/db';

const { env } = Astro.locals.runtime;
const db = env.DB;

const articles = await getBookmarkedArticles(db);
---

<BaseLayout title="북마크 - Tech Digest">
  <div class="space-y-4">
    <h1 class="text-xl font-bold">북마크</h1>

    {articles.length === 0 ? (
      <div class="rounded-lg border border-border bg-surface-alt p-8 text-center">
        <p class="text-text-secondary">북마크한 기사가 없습니다.</p>
        <a href="/all" class="mt-2 inline-block text-sm text-primary hover:underline">전체 기사 보기</a>
      </div>
    ) : (
      <div class="space-y-2">
        {articles.map((article) => (
          <ArticleCard article={article} variant="small" />
        ))}
      </div>
    )}
  </div>
</BaseLayout>
